---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "checkly_check Resource - terraform-provider-checkly"
subcategory: ""
description: |-
  Check groups allow you to group together a set of related checks, which can also share default settings for various attributes.
---

# checkly_check (Resource)

Check groups allow you to group together a set of related checks, which can also share default settings for various attributes.

## Example Usage

```terraform
# Basic API Check
resource "checkly_check" "example_check" {
  name                      = "Example check"
  type                      = "API"
  activated                 = true
  should_fail               = false
  frequency                 = 1
  use_global_alert_settings = true

  locations = [
    "us-west-1"
  ]

  request = {
    url              = "https://api.example.com/"
    follow_redirects = true
    skip_ssl         = false
    assertions = [{
      source     = "STATUS_CODE"
      comparison = "EQUALS"
      target     = "200"
    }]
  }
}

# A more complex example using more assertions and setting alerts
resource "checkly_check" "example_check_2" {
  name                   = "Example API check 2"
  type                   = "API"
  activated              = true
  should_fail            = true
  frequency              = 1
  degraded_response_time = 5000
  max_response_time      = 10000

  locations = [
    "us-west-1",
    "ap-northeast-1",
    "ap-south-1",
  ]

  alert_settings = {
    escalation_type = "RUN_BASED"

    run_based_escalation = {
      failed_run_threshold = 1
    }

    reminders = {
      amount = 1
    }
  }

  retry_strategy = {
    type                 = "FIXED"
    base_backoff_seconds = 60
    max_duration_seconds = 600
    max_retries          = 3
    same_region          = false
  }

  request = {
    follow_redirects = true
    skip_ssl         = false
    url              = "http://api.example.com/"

    query_parameters = {
      search = "foo"
    }

    headers = {
      X-Bogus = "bogus"
    }

    assertion = {
      source     = "JSON_BODY"
      property   = "code"
      comparison = "HAS_VALUE"
      target     = "authentication.failed"
    }

    assertion = {
      source     = "STATUS_CODE"
      property   = ""
      comparison = "EQUALS"
      target     = "401"
    }

    basic_auth = {
      username = ""
      password = ""
    }
  }
}

# Basic Browser  Check
resource "checkly_check" "browser_check_1" {
  name                      = "Example check"
  type                      = "BROWSER"
  activated                 = true
  should_fail               = false
  frequency                 = 10
  use_global_alert_settings = true
  locations = [
    "us-west-1"
  ]

  runtime_id = "2023.02"

  script = <<EOT
const { expect, test } = require('@playwright/test')

test.use({ actionTimeout: 10000 })

test('visit page and take screenshot', async ({ page }) => {
    const response = await page.goto(process.env.ENVIRONMENT_URL || 'https://checklyhq.com')
    await page.screenshot({ path: 'screenshot.jpg' })
    expect(response.status(), 'should respond with correct status code').toBeLessThan(400)
})
EOT
}

# Connection checks with alert channels
resource "checkly_alert_channel" "email_ac1" {
  email = {
    address = "info1@example.com"
  }
}

resource "checkly_alert_channel" "email_ac2" {
  email = {
    address = "info2@example.com"
  }
}

resource "checkly_check" "example_check" {
  name = "Example check"
  # ...

  alert_channel_subscriptions = [
    {
      channel_id = checkly_alert_channel.email_ac1.id
      activated  = true
    },
    {
      channel_id = checkly_alert_channel.email_ac2.id
      activated  = true
    }
  ]
}

# An alternative syntax for add the script is by referencing an external file
# data "local_file" "browser_script" {
#   filename = "${path.module}/browser-script.js"
# }

# resource "checkly_check" "browser_check_1" {
#   name                      = "Example check"
#   type                      = "BROWSER"
#   activated                 = true
#   should_fail               = false
#   frequency                 = 10
#   use_global_alert_settings = true
#   locations = [
#     "us-west-1"
#   ]

#   runtime_id = "2023.02"
#   script = data.local_file.browser_script.content
# }
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `activated` (Boolean) Determines if the check is running or not. Possible values `true`, and `false`.
- `frequency` (Number) The frequency in minutes to run the check. Possible values are `0`, `1`, `2`, `5`, `10`, `15`, `30`, `60`, `120`, `180`, `360`, `720`, and `1440`.
- `name` (String) The name of the check.
- `type` (String) The type of the check. Possible values are `API`, `BROWSER`, and `MULTI_STEP`.

### Optional

- `alert_channel_subscription` (Attributes List) An array of channel IDs and whether they're activated or not. If you don't set at least one alert subscription for your check, we won't be able to alert you in case something goes wrong with it. (see [below for nested schema](#nestedatt--alert_channel_subscription))
- `alert_settings` (Attributes) (see [below for nested schema](#nestedatt--alert_settings))
- `degraded_response_time` (Number) The response time in milliseconds starting from which a check should be considered degraded. Possible values are between 0 and 30000. (Default `15000`).
- `double_check` (Boolean, Deprecated) Setting this to `true` will trigger a retry when a check fails from the failing region and another, randomly selected region before marking the check as failed.
- `environment_variable` (Attributes List) Introduce additional environment variables to the check execution environment. Only relevant for browser checks. Prefer global environment variables when possible. (see [below for nested schema](#nestedatt--environment_variable))
- `environment_variables` (Map of String, Deprecated) Key/value pairs for setting environment variables during check execution. These are only relevant for browser checks. Use global environment variables whenever possible.
- `frequency_offset` (Number) This property is only valid for high frequency API checks. To create a high frequency check, the property `frequency` must be `0` and `frequency_offset` could be `10`, `20` or `30`.
- `group_id` (Number) The id of the check group this check is part of.
- `group_order` (Number) The position of this check in a check group. It determines in what order checks are run when a group is triggered from the API or from CI/CD.
- `local_setup_script` (String) A valid piece of Node.js code to run in the setup phase.
- `local_teardown_script` (String) A valid piece of Node.js code to run in the teardown phase.
- `locations` (Set of String) An array of one or more data center locations where to run the checks.
- `max_response_time` (Number) The response time in milliseconds starting from which a check should be considered failing. Possible values are between 0 and 30000. (Default `30000`).
- `muted` (Boolean) Determines if any notifications will be sent out when a check fails/degrades/recovers.
- `private_locations` (Set of String) An array of one or more private locations slugs.
- `request` (Attributes) (see [below for nested schema](#nestedatt--request))
- `retry_strategy` (Attributes) A strategy for retrying failed check runs. (see [below for nested schema](#nestedatt--retry_strategy))
- `run_parallel` (Boolean) Determines if the check should run in all selected locations in parallel or round-robin.
- `runtime_id` (String) The id of the runtime to use for this check.
- `script` (String) A valid piece of Node.js JavaScript code describing a browser interaction with the Puppeteer/Playwright framework or a reference to an external JavaScript file.
- `setup_snippet_id` (Number) An ID reference to a snippet to use in the setup phase of an API check.
- `should_fail` (Boolean) Allows to invert the behaviour of when a check is considered to fail. Allows for validating error status like 404.
- `ssl_check` (Boolean, Deprecated) Determines if the SSL certificate should be validated for expiry.
- `ssl_check_domain` (String) A valid fully qualified domain name (FQDN) to check its SSL certificate.
- `tags` (Set of String) Tags for organizing and filtering checks.
- `teardown_snippet_id` (Number) An ID reference to a snippet to use in the teardown phase of an API check.
- `use_global_alert_settings` (Boolean) When true, the account level alert settings will be used, not the alert setting defined on this check.

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedatt--alert_channel_subscription"></a>
### Nested Schema for `alert_channel_subscription`

Required:

- `activated` (Boolean)
- `channel_id` (Number)


<a id="nestedatt--alert_settings"></a>
### Nested Schema for `alert_settings`

Optional:

- `escalation_type` (String) Determines what type of escalation to use. Possible values are `RUN_BASED` or `TIME_BASED`.
- `parallel_run_failure_threshold` (Attributes) (see [below for nested schema](#nestedatt--alert_settings--parallel_run_failure_threshold))
- `reminders` (Attributes) (see [below for nested schema](#nestedatt--alert_settings--reminders))
- `run_based_escalation` (Attributes) (see [below for nested schema](#nestedatt--alert_settings--run_based_escalation))
- `ssl_certificates` (Attributes, Deprecated) At what interval the reminders should be sent. (see [below for nested schema](#nestedatt--alert_settings--ssl_certificates))
- `time_based_escalation` (Attributes) (see [below for nested schema](#nestedatt--alert_settings--time_based_escalation))

<a id="nestedatt--alert_settings--parallel_run_failure_threshold"></a>
### Nested Schema for `alert_settings.parallel_run_failure_threshold`

Optional:

- `enabled` (Boolean) Applicable only for checks scheduled in parallel in multiple locations.
- `percentage` (Number) Possible values are `10`, `20`, `30`, `40`, `50`, `60`, `70`, `80`, `90`, and `100`. (Default `10`).


<a id="nestedatt--alert_settings--reminders"></a>
### Nested Schema for `alert_settings.reminders`

Optional:

- `amount` (Number) How many reminders to send out after the initial alert notification. Possible values are `0`, `1`, `2`, `3`, `4`, `5`, and `100000`
- `interval` (Number) Possible values are `5`, `10`, `15`, and `30`. (Default `5`).


<a id="nestedatt--alert_settings--run_based_escalation"></a>
### Nested Schema for `alert_settings.run_based_escalation`

Optional:

- `failed_run_threshold` (Number) After how many failed consecutive check runs an alert notification should be sent. Possible values are between 1 and 5. (Default `1`).


<a id="nestedatt--alert_settings--ssl_certificates"></a>
### Nested Schema for `alert_settings.ssl_certificates`

Optional:

- `alert_threshold` (Number) How long before SSL certificate expiry to send alerts. Possible values `3`, `7`, `14`, `30`. (Default `3`).
- `enabled` (Boolean) Determines if alert notifications should be sent for expiring SSL certificates. Possible values `true`, and `false`. (Default `false`).


<a id="nestedatt--alert_settings--time_based_escalation"></a>
### Nested Schema for `alert_settings.time_based_escalation`

Optional:

- `minutes_failing_threshold` (Number) After how many minutes after a check starts failing an alert should be sent. Possible values are `5`, `10`, `15`, and `30`. (Default `5`).



<a id="nestedatt--environment_variable"></a>
### Nested Schema for `environment_variable`

Required:

- `key` (String) The name of the environment variable.
- `value` (String, Sensitive) The value of the environment variable. By default the value is plain text and can be seen by any team member. It will also be present in check results and logs.

Optional:

- `locked` (Boolean) Locked environment variables are encrypted at rest and in flight on the Checkly backend and are only decrypted when needed. Their value is hidden by default, but can be accessed by team members with the appropriate permissions.
- `secret` (Boolean) Secret environment variables are always encrypted and their value is never shown to any user. However, keep in mind that your Terraform state will still contain the value.


<a id="nestedatt--request"></a>
### Nested Schema for `request`

Required:

- `url` (String)

Optional:

- `assertion` (Attributes List) (see [below for nested schema](#nestedatt--request--assertion))
- `basic_auth` (Attributes) Credentials for Basic HTTP authentication. (see [below for nested schema](#nestedatt--request--basic_auth))
- `body` (String) The body of the request.
- `body_type` (String) The `Content-Type` header of the request. Possible values `NONE`, `JSON`, `FORM`, `RAW`, and `GRAPHQL`.
- `follow_redirects` (Boolean)
- `headers` (Map of String)
- `ip_family` (String) IP Family to be used when executing the api check. The value can be either IPv4 or IPv6.
- `method` (String) The HTTP method to use for this API check. Possible values are `GET`, `POST`, `PUT`, `HEAD`, `DELETE`, `PATCH`. (Default `GET`).
- `query_parameters` (Map of String)
- `skip_ssl` (Boolean)

<a id="nestedatt--request--assertion"></a>
### Nested Schema for `request.assertion`

Required:

- `comparison` (String) The type of comparison to be executed between expected and actual value of the assertion. Possible values `EQUALS`, `NOT_EQUALS`, `HAS_KEY`, `NOT_HAS_KEY`, `HAS_VALUE`, `NOT_HAS_VALUE`, `IS_EMPTY`, `NOT_EMPTY`, `GREATER_THAN`, `LESS_THAN`, `CONTAINS`, `NOT_CONTAINS`, `IS_NULL`, and `NOT_NULL`.
- `source` (String) The source of the asserted value. Possible values `STATUS_CODE`, `JSON_BODY`, `HEADERS`, `TEXT_BODY`, and `RESPONSE_TIME`.
- `target` (String)

Optional:

- `property` (String)


<a id="nestedatt--request--basic_auth"></a>
### Nested Schema for `request.basic_auth`

Required:

- `password` (String, Sensitive)
- `username` (String)



<a id="nestedatt--retry_strategy"></a>
### Nested Schema for `retry_strategy`

Required:

- `type` (String) Determines which type of retry strategy to use. Possible values are `FIXED`, `LINEAR`, or `EXPONENTIAL`.

Optional:

- `base_backoff_seconds` (Number) The number of seconds to wait before the first retry attempt.
- `max_duration_seconds` (Number) The total amount of time to continue retrying the check (maximum 600 seconds).
- `max_retries` (Number) The maximum number of times to retry the check. Value must be between 1 and 10.
- `same_region` (Boolean) Whether retries should be run in the same region as the initial check run.
